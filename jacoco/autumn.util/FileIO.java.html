<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>FileIO.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">com.mackenziehigh:autumn</a> &gt; <a href="index.source.html" class="el_package">autumn.util</a> &gt; <span class="el_source">FileIO.java</span></div><h1>FileIO.java</h1><pre class="source lang-java linenums">package autumn.util;

import com.google.common.base.Preconditions;
import com.google.common.collect.ImmutableSet;
import com.google.common.io.Files;
import java.io.File;
import java.io.IOException;
import java.nio.charset.Charset;
import java.util.Iterator;
import java.util.List;
import java.util.NoSuchElementException;
import java.util.Set;
import java.util.Stack;

/**
 * This class provides a few static utility methods for dealing with files.
 *
 * &lt;p&gt;
 * &lt;b&gt;Warning: This class is still under development.&lt;/b&gt;
 * &lt;/p&gt;
 *
 * @author Mackenzie High
 */
public final class FileIO
{
    /**
     * Sole Constructor.
     */
    private FileIO()
    {
        // Pass, because this is merely a static utility class.
    }

    /**
     * This method creates an iterable whose iterator can iterate over all the files in a directory.
     *
     * &lt;p&gt;
     * If recur is true, sub-directories will be returned before their contents.
     * &lt;/p&gt;
     *
     * @param root is the directory to iterate over.
     * @param recur is true, if the sub-directories transversed.
     * @return the aforedescribed iterator.
     * @throws IllegalArgumentException if root is not a directory.
     */
    public static Set&lt;File&gt; filesOf(final File root,
                                    final boolean recur)
    {
<span class="fc" id="L49">        Preconditions.checkNotNull(root);</span>
<span class="fc" id="L50">        Preconditions.checkArgument(root.isDirectory(), &quot;Expected a Directory: &quot; + root);</span>

        // This stack stores files and directories that have not yet been returned.
<span class="fc" id="L53">        final Stack&lt;File&gt; stack = new Stack();</span>

        // Push the files that are in the root directory.
<span class="fc bfc" id="L56" title="All 2 branches covered.">        for (File file : root.listFiles())</span>
        {
<span class="fc" id="L58">            stack.push(file);</span>
        }

        /**
         * Create the iterable, which basically performs a preorder depth-first transversal.
         */
<span class="fc" id="L64">        final Iterable&lt;File&gt; enumerator = new Iterable&lt;File&gt;()</span>
<span class="fc" id="L65">        {</span>
            @Override
            public Iterator&lt;File&gt; iterator()
            {
<span class="fc" id="L69">                return new Iterator&lt;File&gt;()</span>
<span class="fc" id="L70">                {</span>
                    @Override
                    public boolean hasNext()
                    {
<span class="fc bfc" id="L74" title="All 2 branches covered.">                        return !stack.isEmpty();</span>
                    }

                    @Override
                    public File next()
                    {
                        // This is required by the iterator interface.
<span class="pc bpc" id="L81" title="1 of 2 branches missed.">                        if (hasNext() == false)</span>
                        {
<span class="nc" id="L83">                            throw new NoSuchElementException(&quot;Out of Files&quot;);</span>
                        }

                        // Get the next file to return.
<span class="fc" id="L87">                        final File next = stack.pop();</span>

<span class="fc bfc" id="L89" title="All 4 branches covered.">                        if (recur &amp;&amp; next.isDirectory())</span>
                        {
                            // Push all the files that are directly contained in the sub-directory.
<span class="fc bfc" id="L92" title="All 2 branches covered.">                            for (File child : next.listFiles())</span>
                            {
<span class="fc" id="L94">                                stack.push(child);</span>
                            }
                        }

<span class="fc" id="L98">                        return next;</span>
                    }

                    @Override
                    public void remove()
                    {
<span class="nc" id="L104">                        throw new UnsupportedOperationException(&quot;Not Supported&quot;);</span>
                    }
                };
            }
        };

        /**
         * Find all of the files.
         */
<span class="fc" id="L113">        final Set&lt;File&gt; files = ImmutableSet.copyOf(enumerator);</span>

<span class="fc" id="L115">        return files;</span>
    }

    /**
     * This method sets the contents of a text file.
     *
     * &lt;p&gt;
     * This method uses the default encoding.
     * &lt;/p&gt;
     *
     * @param file is the path to the text file.
     * @param data is value to assign to the text file.
     * @throws IOException if something goes wrong.
     */
    public static void writeText(final File file,
                                 final CharSequence data)
            throws IOException
    {
<span class="fc" id="L133">        writeText(file, data, Charset.defaultCharset());</span>
<span class="fc" id="L134">    }</span>

    /**
     * This method sets the contents of a text file.
     *
     * @param file is the path to the text file.
     * @param data is value to assign to the text file.
     * @param charset is the encoding to use.
     * @throws IOException if something goes wrong.
     */
    public static void writeText(final File file,
                                 final CharSequence data,
                                 final Charset charset)
            throws IOException
    {
<span class="fc" id="L149">        Preconditions.checkNotNull(file);</span>
<span class="fc" id="L150">        Preconditions.checkNotNull(data);</span>
<span class="fc" id="L151">        Preconditions.checkNotNull(charset);</span>

<span class="fc" id="L153">        Files.write(data, file, charset);</span>
<span class="fc" id="L154">    }</span>

    /**
     * This method sets the contents of a text file.
     *
     * @param file is the path to the text file.
     * @param lines are the lines of data to assign to the text file.
     * @param charset is the encoding to use.
     * @throws IOException if something goes wrong.
     */
    public static void writeLines(final File file,
                                  final Iterable&lt;? extends CharSequence&gt; lines,
                                  final Charset charset)
            throws IOException
    {
<span class="nc" id="L169">        Preconditions.checkNotNull(file);</span>
<span class="nc" id="L170">        Preconditions.checkNotNull(lines);</span>
<span class="nc" id="L171">        Preconditions.checkNotNull(charset);</span>

<span class="nc bnc" id="L173" title="All 2 branches missed.">        for (CharSequence line : lines)</span>
        {
<span class="nc" id="L175">            Preconditions.checkNotNull(line);</span>
<span class="nc" id="L176">            Files.append(line, file, charset);</span>
<span class="nc" id="L177">        }</span>
<span class="nc" id="L178">    }</span>

    /**
     * This method sets the contents of a binary file.
     *
     * @param file is the path to the binary file.
     * @param data is value to assign to the binary file.
     * @throws IOException if something goes wrong.
     */
    public static void writeBytes(final File file,
                                  final byte[] data)
            throws IOException
    {
<span class="nc" id="L191">        Preconditions.checkNotNull(file);</span>
<span class="nc" id="L192">        Preconditions.checkNotNull(data);</span>

<span class="nc" id="L194">        Files.write(data, file);</span>
<span class="nc" id="L195">    }</span>

    /**
     * This method reads all the lines of a text file into a list of strings.
     *
     * @param file is the file to read.
     * @return a list containing the lines as strings.
     * @throws IOException if the file does not exist or is unreadable.
     */
    public static List&lt;String&gt; readLines(final File file)
            throws IOException
    {
<span class="fc" id="L207">        Preconditions.checkNotNull(file);</span>

<span class="fc" id="L209">        return Files.readLines(file, Charset.defaultCharset());</span>
    }

    /**
     * This method reads all the lines of a text file into a list of strings.
     *
     * @param file is the file to read.
     * @param charset is the encoding of the file.
     * @return a list containing the lines as strings.
     * @throws IOException if the file does not exist or is unreadable.
     */
    public static List&lt;String&gt; readLines(final File file,
                                         final Charset charset)
            throws IOException
    {
<span class="nc" id="L224">        Preconditions.checkNotNull(file);</span>
<span class="nc" id="L225">        Preconditions.checkNotNull(charset);</span>

<span class="nc" id="L227">        return Files.readLines(file, charset);</span>
    }

    /**
     * This method reads a text file into a string.
     *
     * @param file is the file to read.
     * @return the content of the file as a string.
     * @throws IOException if the file does not exist or is unreadable.
     */
    public static String readText(final File file)
            throws IOException
    {
<span class="fc" id="L240">        Preconditions.checkNotNull(file);</span>

<span class="fc" id="L242">        return readText(file, Charset.defaultCharset());</span>
    }

    /**
     * This method reads a text file into a string.
     *
     * @param file is the file to read.
     * @param charset is the encoding of the file.
     * @return the content of the file as a string.
     * @throws IOException if the file does not exist or is unreadable.
     */
    public static String readText(final File file,
                                  final Charset charset)
            throws IOException
    {
<span class="fc" id="L257">        Preconditions.checkNotNull(file);</span>
<span class="fc" id="L258">        Preconditions.checkNotNull(charset);</span>

<span class="fc" id="L260">        return Files.toString(file, charset);</span>
    }

    /**
     * This method reads a binary file into an array of bytes.
     *
     * @param file is the file to read.
     * @return the content of the file as an array of bytes.
     * @throws IOException if the file does not exist or is unreadable.
     */
    public static byte[] readBytes(final File file)
            throws IOException
    {
<span class="fc" id="L273">        Preconditions.checkNotNull(file);</span>

<span class="fc" id="L275">        return Files.toByteArray(file);</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.13.202504020838</span></div></body></html>